(this["webpackJsonpearthday-webxr"]=this["webpackJsonpearthday-webxr"]||[]).push([[0],{44:function(e,t,n){e.exports=n(59)},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(20),o=n.n(r),s=n(14),c=n(21),l=n(7),u={camera:!1,biome:!1,message:"PLACE_GLOBE",globePlaced:!1,section:120,helpDisplayed:!1},d={info:!1,camera:!1,hide:!0,biome:!1,message:!0,picture:!1,hideHotspots:!1,section:!1},p=Object(c.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_BIOME":var n=t.payload.biome;return Object(l.a)({},e,{biome:n});case"CLOSE_BIOME":return Object(l.a)({},e);case"SET_MESSAGE":var a=t.payload.message;return Object(l.a)({},e,{message:a});case"PLACE_GLOBE":return Object(l.a)({},e,{globePlaced:!0});case"RESET_GLOBE":return Object(l.a)({},e,{globePlaced:!1,message:"PLACE_GLOBE"});case"UPDATE_SECTION":var i=t.payload.degrees;return Object(l.a)({},e,{section:i});case"HELP_DISPLAYED":return Object(l.a)({},e,{helpDisplayed:!0});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_INFO":return Object(l.a)({},e,{info:!e.info,hide:!e.info});case"TOGGLE_CAMERA":return Object(l.a)({},e,{camera:!e.camera,hide:!e.camera,picture:!1});case"TOGGLE_SECTION":return Object(l.a)({},e,{section:!e.section,info:!1,hide:!e.section,hideHotspots:!e.section});case"SET_MESSAGE":return Object(l.a)({},e,{message:!0,hide:!0});case"CLOSE_MESSAGE":var n=t.payload.hide,a=void 0!==n&&n;return Object(l.a)({},e,{message:!1,hide:a});case"PLACE_GLOBE":return Object(l.a)({},e);case"RESET_GLOBE":return Object(l.a)({},e,{message:!0,hide:!0});case"SELECT_BIOME":return!0===e.biome?e:Object(l.a)({},e,{biome:!0,camera:!1,hide:!0,hideHotspots:!0});case"CLOSE_BIOME":return Object(l.a)({},e,{biome:!1,camera:!1,hide:e.section,hideHotspots:e.section});case"TAKE_PICTURE":return Object(l.a)({},e,{picture:!0});default:return e}}}),h=Object(c.c)(p,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),m=n(9),b=n(13),f=n(11),g=n(10),v=n(12),w=n(6),E=n(23),y=n(2),O=n(31),x=n(32),S=n(33),T=n(34),C=n(8),j={background:133393,bgHaze:333868,deepBlue:1134997,blue:2454452,aqua:2529698,green:4960926,lightGreen:11589779,sand:14537670,fact:4970820,core:15525324,innerCore:14860630,mantle:12725775,upperMantle:11573346,innerCoreDarker:11706662,mantleDarker:9568256,upperMantleDarker:9463858};y.Y.prototype.toGrid=function(){for(var e=this.parameters.widthSegments||1,t=this.parameters.heightSegments||1,n=[],a=0;a<t+1;a+=1){for(var i=0,r=0,o=0;o<e;o+=1){r=(i=(e+1)*a+o)+1;var s=i,c=i+(e+1);n.push(i,r),c<(e+1)*(t+1)-1&&n.push(s,c)}r+e+1<=(e+1)*(t+1)-1&&n.push(r,r+e+1)}return this.setIndex(n),this};var k=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).renderer=null,e.scene=null,e.camera=null,e.earth=null,e.globe=new y.t,e.el=i.a.createRef(),e}return Object(v.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.cameraTarget,a=t.xrEnabled;this.scene=new y.lb,this.scene.fog=new y.r(j.bgHaze,62.5,125);var i=window.devicePixelRatio;switch(this.renderer=new y.Ab({antialias:!0}),this.renderer.setClearColor(j.bgHaze,1),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(i),this.el.current.appendChild(this.renderer.domElement),a&&(document.body.appendChild(S.a.createButton(this.renderer)),this.renderer.xr.enabled=!0),this.renderer.shadowMap.enabled=!0,this.camera=new y.W(50,window.innerWidth/window.innerHeight,.001,250),n){case"side":this.camera.position.x=-1.5,this.camera.position.z=-5,this.camera.lookAt(new y.yb(-1.5,0,0));break;default:this.camera.position.x=0,this.camera.position.z=-10,this.camera.lookAt(new y.yb(0,0,0))}var r=new y.a(16777215,.5);this.scene.add(r);var o=new y.n(16777215,1);o.position.set(-10,10,-10),o.castShadow=!0,this.scene.add(o),this.plane=new y.C(new y.Y(250,250,128,128).toGrid(),new y.M({color:16777215,opacity:.4,transparent:!0})),this.scene.add(this.plane),this.plane.position.y=-10,this.plane.rotateX(y.J.degToRad(-90));var s=T.isMobile?.024:.012;this.renderer.setAnimationLoop((function(t){var n=t/2e3;e.plane.material.opacity=Math.cos(n)/10+.25,e.earth&&e.globe.rotateY(y.J.degToRad(s)),e.renderer.render(e.scene,e.camera)}));window.addEventListener("resize",(function(){e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight)}),!1)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.globe,a=this.props.globe;if(null===n&&a){this.earth=a;var i={x:1e-4,y:1e-4,z:1e-4};this.globe.scale.set(i.x,i.y,i.z),this.globe.rotateY(y.J.degToRad(-125)),this.globe.add(this.earth),this.scene.add(this.globe),Object(C.autoPlay)(!0),new C.Tween(i).to({x:1,y:1,z:1},750).easing(C.Easing.Quadratic.Out).on("update",(function(e){var n=e.x,a=e.y,i=e.z;t.globe.scale.set(n,a,i)})).delay(500).start()}}},{key:"componentWillUnmount",value:function(){this.renderer.setAnimationLoop(null),this.renderer.domElement.remove()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"three",ref:this.el}))}}]),t}(a.Component),M=n(19),R=n(4),L=n(35),I=n.n(L),P=n(5),A=function(){return{type:"TOGGLE_INFO"}},_=function(){return{type:"TOGGLE_SECTION"}},z=function(){return{type:"CLOSE_BIOME"}},N=function(){return{type:"RESET_GLOBE"}},F=n(36),H=new y.ub,D={core:H.load("".concat(".","/assets/textures/core/core-section.png"))},B={info:H.load("".concat(".","/assets/sprites/info-sprite-45f-7x7-2048.png")),globe:H.load("".concat(".","/assets/sprites/globe-sprite-45f-7x7-2048.png"))},G={createCore:function(){var e=new y.L(new y.pb(.55,16,16),new y.M({color:j.core}));return e.name="core",e},createSectionMesh:function(){var e=new y.t,t=new y.L(new y.kb(0,1.92,64,1),new y.M({color:16777215,side:y.o,map:D.core}));e.add(t);var n=new y.L(new y.kb(1.92,1.995,64,1),new y.M({color:j.deepBlue}));return e.add(n),e},hotspotGeometry:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"info",i=e.lat,r=e.lon,o=e.component,s=new y.t,c=function(e,t){var n=i*(Math.PI/180),a=-r*(Math.PI/180);e.position.set(Math.cos(n)*Math.cos(a)*t,Math.sin(n)*t,Math.cos(n)*Math.sin(a)*t),e.rotation.set(0,-a,n-.5*Math.PI)},l=function(e){var t=i*(Math.PI/180),n=-r*(Math.PI/180);return new y.yb(Math.cos(t)*Math.cos(n)*e,Math.sin(t)*e,Math.cos(t)*Math.sin(n)*e)},u=new y.L(new y.pb(.01,16,16),new y.M({color:j.green,transparent:!0,opacity:1}));c(u,t),s.add(u);var d=[];d.push(l(t)),d.push(l(n-.01));var p=new y.z((new y.i).setFromPoints(d),new y.A({color:j.green,transparent:!0,opacity:1}));s.add(p);var h=new F.PlainAnimator(B[a],7,7,45,30),m=h.init(),b=new y.rb(new y.sb({map:m,transparent:!0,opacity:1}));return b.name="hotspot-touch",b.scale.set(.18,.18,1),c(b,n),s.add(b),s.name="hotspot",s.userData={type:"hotspot",lat:i,lon:r,component:o,sprite:b,animator:h},s}},q={setOpacity:function(e,t){e.traverse((function(e){if(e.material){var n=e.material;n.transparent=!0,n.opacity=t}}))},cloneMaterials:function(e){e.traverse((function(e){if(e.material){var t=e.material;e.material=t.clone()}}))},animateOpacity:function(e,t,n){var a=e,i={opacity:t};new C.Tween(i).to({opacity:n},750).easing(C.Easing.Quadratic.Out).on("update",(function(e){var t=e.opacity;q.setOpacity(a,t)})).on("complete",(function(){0===n&&(a.visible=!1)})).start()},animateScale:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e,r=0===n.y?C.Easing.Quadratic.Out:C.Easing.Elastic.Out;new C.Tween(t).to(n,1750).easing(r).on("start",(function(){0===t.y&&(i.visible=!0)})).on("update",(function(e){var t=e.x,n=e.y,a=e.z;i.scale.set(t,n,a)})).on("complete",(function(){0===n.y&&(i.visible=!1)})).delay(a).start()},shrub:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e,i=Math.cos(Math.random()*Math.PI),r=.3*i,o={x:t.x+r,y:t.y+r,z:t.z+r},s=new C.Tween(t).to(o,2e3).easing(C.Easing.Elastic.Out).on("update",(function(e){var t=e.x,n=e.y,i=e.z;a.rotation.set(t,n,i)})).delay(n);new C.Tween(o).to(t,2e3).easing(C.Easing.Elastic.Out).on("update",(function(e){var t=e.x,n=e.y,i=e.z;a.rotation.set(t,n,i)})).chainedTweens(s).delay(n).start()}},U=q;function X(){var e=Object(R.a)(["\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n"]);return X=function(){return e},e}var W=[{lat:-28.24,lon:-55,component:"TropicalRainforest"},{lat:15.62,lon:-95.09,component:"TemperateRainforest"},{lat:23.52,lon:32.84,component:"Freshwater"},{lat:.780288,lon:-105.882064,component:"Chaparral"}],J=[{distance:.55,component:"InnerCore"},{distance:1.05,component:"OuterCore"},{distance:1.5,component:"Mantle"},{distance:1.98,component:"Crust"}],Y=P.a.canvas(X()),Q=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).renderer=null,e.scene=new y.lb,e.camera=new y.j,e.controller=null,e.listener=null,e.audioInteraction=null,e.audioBg=null,e.fakeEarth=null,e.earth=null,e.biomes=null,e.sunlight=null,e.globe=new y.t,e.group=new y.t,e.hotspots=new y.t,e.innerHotspots=new y.t,e.clock=new y.l,e.animations={},e.surface=null,e.controls=null,e.el=i.a.createRef(),e.image=!1,e.statePlace=!0,e.rotating=!0,e.screenshot=null,e.mixer=null,e.raycaster=new y.ib,e.tapPosition=new y.xb,e.vec3=new y.yb,e.tempMatrix=new y.K,e.helpTimeout=null,e.theta=0,e.hitTestSource=null,e.hitTestSourceRequested=!1,e.clipPlanes=[new y.X,new y.X],e.planeNormal=[new y.yb,new y.yb],e.planePoint=[new y.yb,new y.yb],e.axis=new y.yb(1,0,0),e.sectionRotation=0,e.saved={rotation:null,scale:1,touches:[],vector:new y.yb},e.attachHandlers=function(){var t=new I.a(e.canvas);t.on("tap",(function(t){var n=Object(M.a)(e).props,a=n.globe,i=n.store,r=i.app,o=i.ui;if(w.a.event({category:"ui",action:"interaction",label:"tap"}),e.rotating=!1,!1===r.globePlaced&&!0===e.group.visible)e.spawnEarth(),!1===r.helpDisplayed?e.displayHelp():n.closeMessage(),n.placeGlobe();else if(e.tapPosition.x=t.center.x/window.innerWidth*2-1,e.tapPosition.y=-t.center.y/window.innerHeight*2+1,e.raycaster.setFromCamera(e.tapPosition,e.xrCamera),!1===o.biome&&!1===o.section){var s=e.raycaster.intersectObjects([e.earth.children[0],e.hotspots],!0);if(s.length>0&&"hotspot"===s[0].object.parent.name){var c=s[0].object.parent.userData.component;"Section"===c?n.toggleSection():n.selectBiome(c)}}else if(!1===o.biome&&!0===o.section){var l=e.raycaster.intersectObjects(e.innerHotspots.children,!0);if(l.length>0&&"hotspot"===l[0].object.parent.name){var u=l[0].object.parent.userData.component;n.selectBiome(u,!0)}}else{if(!0===o.section)return;e.audioInteraction.isPlaying&&e.audioInteraction.stop();var d=r.biome.toLowerCase();w.a.event({category:"app",action:"interaction",label:d});var p=a.userData,h=p.biomes,m=p.rotations,b=p.audioBuffers;if("tropicalrainforest"===d||"temperaterainforest"===d){var f=h[d].children;(void 0===f?[]:f).forEach((function(e){/(tree|spruce|pine)/.test(e.name)&&U.shrub(e,m[e.name])}))}b["".concat(d,"-interaction")]&&(e.audioInteraction.setBuffer(b["".concat(d,"-interaction")]),e.audioInteraction.play()),e.animations[d]&&e.animations[d].reset().play()}})),t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!1}),t.get("pan").set({enable:!0,threshold:5}),t.on("pan",(function(t){if(!0!==Object(M.a)(e).props.store.ui.section){var n=t.velocityX,a=t.velocityY,i=t.deltaX,r=t.deltaY,o=t.srcEvent,s=o.movementX,c=o.movementY,l={x:i,y:r};s&&c?(l.x=s/15,l.y=c/15):(l.x=n/.425,l.y=a/.425);var u=(new y.eb).setFromEuler(new y.p(y.J.degToRad(1*l.y),y.J.degToRad(1*l.x),0,"XYZ"));e.globe.quaternion.multiplyQuaternions(u,e.globe.quaternion)}})),t.on("pinchstart",(function(t){var n=t.scale;e.saved.scale=n})),t.on("pinch",(function(t){var n=t.scale,a=n-e.saved.scale,i=e.globe.scale.x+a;i>3||i<.1||(e.globe.scale.set(i,i,i),e.earthSectionLeft.scale.set(i,i,i),e.earthSectionRight.scale.set(i,i,i),e.innerHotspots.scale.set(i,i,i),e.saved.scale=n)})),t.on("panend",(function(){w.a.event({category:"ui",action:"interaction",label:"rotate"})})),t.on("pinchend",(function(){w.a.event({category:"ui",action:"interaction",label:"scale"})}))},e.displayHelp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(M.a)(e),a=n.props,i=["INSTRUCTIONS_SWIPE","INSTRUCTIONS_PINCH","INSTRUCTIONS_TAP","INSTRUCTIONS_ICON"],r=i[t];a.closeMessage(!0),e.helpTimeout=setTimeout((function(){a.setMessage(r),setTimeout((function(){"undefined"!==typeof i[t+1]?e.displayHelp(t+1):(a.closeMessage(),a.setHelpDisplayed())}),3e3)}),350)},e.spawnEarth=function(){var t=e.group.position,n=t.x,a=t.z;e.earthSectionLeft.position.set(n,1,a),e.earthSectionRight.position.set(n,1,a),e.innerHotspots.position.set(n,1,a);e.globe.scale.set(1e-4,1e-4,1e-4),e.globe.visible=!0,e.group.position.setFromMatrixPosition(e.group.matrix),e.group.matrixAutoUpdate=!0,e.earth.visible=!0,e.hotspots.visible=!0,e.ring.visible=!1,e.fakeEarth.visible=!1,e.group.rotation.y=e.camera.rotation.y,new C.Tween({x:1e-4,y:1e-4,z:1e-4}).to({x:1,y:1,z:1},750).easing(C.Easing.Quadratic.Out).on("update",(function(t){var n=t.x,a=t.y,i=t.z;e.globe.scale.set(n,a,i)})).on("complete",(function(){e.earthSectionLeft.scale.set(1,1,1),e.earthSectionRight.scale.set(1,1,1),e.innerHotspots.scale.set(1,1,1)})).start().delay(2e3),w.a.event({category:"app",action:"globe",label:"place"})},e.updateSections=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Math.min(180,Math.max(0,t)),i=Object(E.a)(e.clipPlanes,2),r=i[0],o=i[1],s=Object(E.a)(e.planeNormal,2),c=s[0],l=s[1],u=Object(E.a)(e.planePoint,2),d=u[0],p=u[1];!0===n&&(e.earthSectionLeft.rotation.y=0,c.set(0,0,-1).applyQuaternion(e.earthSectionLeft.quaternion),d.copy(e.group.position),r.setFromNormalAndCoplanarPoint(c,d),e.innerHotspots.rotation.y=e.earthSectionLeft.rotation.y+y.J.degToRad(90)),e.earthSectionRight.rotation.y=y.J.degToRad(-180+a),l.set(0,0,-1).applyQuaternion(e.earthSectionRight.quaternion),p.copy(e.group.position),o.setFromNormalAndCoplanarPoint(l,p)},e.globePipelineModule=function(){e.renderer=new y.Ab({antialias:!0,alpha:!0,canvas:e.canvas}),e.renderer.xr.enabled=!0,e.renderer.localClippingEnabled=!1;var t=e.props.session;e.renderer.xr.setReferenceSpaceType("local"),e.renderer.xr.setSession(t),e.xrCamera=e.renderer.xr.getCamera(e.camera),e.listener=new y.d,e.camera.add(e.listener),e.audioInteraction=new y.c(e.listener),e.audioBg=new y.c(e.listener),e.scene.add(e.group),e.surface=new y.L(new y.Z(80,80,1,1),new y.M({color:16711935,transparent:!0,opacity:0,side:y.o})),e.surface.rotateX(y.J.degToRad(-90)),e.surface.position.set(0,0,0),e.surface.receiveShadow=!0,e.scene.add(e.surface),e.scene.add(new y.a(11184810,.85)),e.sunlight=new y.ab(16777215,1.5),e.sunlight.position.set(0,1,0),e.scene.add(e.sunlight),e.ring=new y.L(new y.kb(.15,.2,32,1).rotateX(-Math.PI/2),new y.M({color:j.lightGreen,side:y.o})),e.group.matrixAutoUpdate=!1,e.group.add(e.ring),W.map((function(t){return function(t){var n="Section"===t.component?"globe":"info",a=G.hotspotGeometry(t,.5,1,n);e.hotspots.add(a)}(t)})),J.map((function(t,n){return function(t,n){var a=t.component,i=t.distance,r=G.hotspotGeometry({lat:85-25*n,lon:2,component:a},i,1.5,"info");e.innerHotspots.add(r)}(t,n)})),e.globe.add(e.hotspots),e.scene.add(e.earthSectionLeft),e.scene.add(e.earthSectionRight),e.scene.add(e.innerHotspots),e.attachHandlers(),window.addEventListener("resize",(function(){e.canvas.width=window.innerWidth,e.canvas.height=window.innerHeight,e.camera.aspect=window.innerWidth/window.innerHeight,e.renderer.setSize(window.innerWidth,window.innerHeight)}),!1);e.renderer.setAnimationLoop((function(t,n){!function(){var t=e.xrCamera.position,n=t.x,a=t.y,i=t.z;e.sunlight.position.set(n,a,i);var r=e.clock.getDelta();e.mixer&&e.mixer.update(r),e.globe&&!0===e.rotating&&e.globe.rotateY(y.J.degToRad(.118))}(),e.hotspots.children.length>0&&e.hotspots.children.map((function(e){return e.userData.animator.animate(),!0})),Object(C.update)(t);var a=Object(M.a)(e).props,i=a.store,r=i.app,o=i.ui.message;if(n&&!1===r.globePlaced){var s=e.renderer.xr.getReferenceSpace(),c=e.renderer.xr.getSession();if(!1===e.hitTestSourceRequested&&(c.requestReferenceSpace("viewer").then((function(t){c.requestHitTestSource({space:t}).then((function(t){e.hitTestSource=t}))})),c.addEventListener("end",(function(){e.hitTestSourceRequested=!1,e.hitTestSource=null})),e.hitTestSourceRequested=!0),e.hitTestSource){var l=n.getHitTestResults(e.hitTestSource);if(l.length){var u=l[0].getPose(s).transform.matrix;e.group.matrix.fromArray(u),e.group.visible=!0,"PLACE_GLOBE"!==o&&a.setMessage("PLACE_GLOBE")}else e.group.visible=!1,"SCAN_FLOOR"!==o&&a.setMessage("SCAN_FLOOR")}}e.renderer.render(e.scene,e.camera)}))},e}return Object(v.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){w.a.pageview("/globe"),this.canvas=this.el.current;var e=this.props.globe;this.earth=e,this.fakeEarth=e.clone(),this.fakeEarth.traverse((function(e){var t=e;t.isMesh&&(t.material=t.material.clone(),"ocean"===t.name&&(t.visible=!1))})),U.setOpacity(this.fakeEarth,.3),this.fakeEarth.position.set(0,1,0),this.group.add(this.fakeEarth),this.globe.add(this.earth),this.globe.visible=!1,this.globe.position.set(0,1,0),this.earth.scale.set(.25,.25,.25),this.fakeEarth.scale.set(.25,.25,.25),this.earthCore=G.createCore(),this.globe.add(this.earthCore),this.earthSectionLeft=G.createSectionMesh(),this.earthSectionRight=G.createSectionMesh(),this.earthSectionLeft.visible=!1,this.earthSectionRight.visible=!1,this.innerHotspots.visible=!1,this.earthCore.visible=!1,this.globe.rotateY(y.J.degToRad(-180)),this.group.add(this.globe),this.globePipelineModule()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.globe,i=n.store,r=i.ui,o=i.app,s=e.store,c=s.ui,l=s.app;if(!1===c.hideHotspots&&!0===r.hideHotspots&&(this.rotating=!1,U.animateOpacity(this.hotspots,1,0)),!0===c.hideHotspots&&!1===r.hideHotspots&&(this.hotspots.visible=!0,U.animateOpacity(this.hotspots,0,1)),!1===c.biome&&!0===r.biome){w.a.event({category:"app",action:"biome",label:o.biome}),w.a.pageview("/globe/".concat(o.biome.toLowerCase())),this.helpTimeout&&(clearTimeout(this.helpTimeout),n.closeMessage(!0),n.setHelpDisplayed());var u=a.userData,d=u.biomes,p=u.scales,h=d[o.biome.toLowerCase()].children,m=void 0===h?[]:h,b=a.userData.audioBuffers["".concat(o.biome.toLowerCase(),"-bg")];if(b&&(this.audioBg.setBuffer(b),this.audioBg.setLoop(!0),this.audioBg.play()),0===m.length)return;var f=0;m.forEach((function(e){var t=p[e.name],n=t.x,a=t.y,i=t.z;U.animateScale(e,{x:0,y:0,z:0},{x:n,y:a,z:i},f),f+=150}))}if(!0===c.biome&&!1===r.biome){var g=a.userData,v=g.biomes,E=g.scales,O=v[o.biome.toLowerCase()].children,x=void 0===O?[]:O;if(w.a.pageview("/globe"),this.audioInteraction.isPlaying&&this.audioInteraction.stop(),this.audioBg.isPlaying&&this.audioBg.stop(),0===x.length)return;var S=0;x.forEach((function(e){var t=E[e.name],n=t.x,a=t.y,i=t.z;U.animateScale(e,{x:n,y:a,z:i},{x:0,y:0,z:0},S),S+=120}))}l.section!==o.section&&(w.a.event({category:"app",action:"interaction",label:"section"}),this.updateSections(o.section)),!1===c.picture&&!0===r.picture&&(w.a.event({category:"app",action:"photo",label:"taken"}),this.takeScreenshot()),!0===l.globePlaced&&!1===o.globePlaced&&(this.ring.visible=!0,this.fakeEarth.visible=!0,this.globe.visible=!1,this.group.matrixAutoUpdate=!1,this.group.rotation.y=0,this.globe.rotation.z=0,this.globe.rotation.x=0,w.a.event({category:"app",action:"globe",label:"reset"})),!1===c.section&&!0===r.section&&(w.a.event({category:"app",action:"section",label:"open"}),w.a.pageview("/globe/section"),this.helpTimeout&&(clearTimeout(this.helpTimeout),n.closeMessage(!0),n.setHelpDisplayed()),this.updateSections(o.section,!0),this.renderer.localClippingEnabled=!0,this.earth.traverse((function(e){var n=e;n.isMesh&&(n.material.clippingPlanes=t.clipPlanes,n.material.clipIntersection=!0,"earth"===n.name&&(n.material.side=y.o))})),this.earthSectionLeft.visible=!0,this.earthSectionRight.visible=!0,this.earthCore.visible=!0,this.innerHotspots.visible=!0),!0===c.section&&!1===r.section&&(w.a.event({category:"app",action:"section",label:"close"}),w.a.pageview("/globe"),this.renderer.localClippingEnabled=!1,this.earth.traverse((function(e){var t=e;t.isMesh&&(t.material.clippingPlanes=[],t.material.clipIntersection=!1,"earth"===t.name&&(t.material.side=y.s))})),this.earthSectionLeft.visible=!1,this.earthSectionRight.visible=!1,this.earthCore.visible=!1,this.innerHotspots.visible=!1)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Y,{id:"ar",ref:this.el}))}}]),t}(a.Component),V=Object(s.b)((function(e){return{store:e}}),{toggleSection:_,selectBiome:function(e,t){return{type:"SELECT_BIOME",payload:{biome:e,section:t}}},resetGlobe:N,placeGlobe:function(){return{type:"PLACE_GLOBE"}},setMessage:function(e){return{type:"SET_MESSAGE",payload:{message:e}}},closeMessage:function(e){return{type:"CLOSE_MESSAGE",payload:{hide:e}}},setHelpDisplayed:function(){return{type:"HELP_DISPLAYED"}}})(Q),K=n(18),Z=n(26),$=n(40);function ee(){var e=Object(R.a)(["",""]);return ee=function(){return e},e}function te(){var e=Object(R.a)(["",""]);return te=function(){return e},e}var ne=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).onClick=function(){var t=e.props.onClick;t&&t()},e}return Object(v.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.square,a=e.big,r=e.text,o=e.disabled,s=a?"\n      padding: 1.25rem;\n      font-size: 1.95rem;  \n      line-height: 0;\n    ":"\n      padding: 0.75rem;\n      font-size: 1.55rem;  \n      line-height: 0;\n    ";n&&(s="\n        padding: 1rem;\n        font-size: 1.2rem;\n        line-height: 1rem;  \n      ");var c="info"===t||"globe"===t||"tap"===t?"\n      z-index: 1000;\n      position: relative;\n      background-color: transparent;\n      color: var(--sand);\n      cursor: pointer;\n      border-width: 0;\n      outline-width: 0;\n\n      &:active {\n        background-color: var(--green);\n      }\n\n      &::before,\n      &::after {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        border-radius: 50%;\n      }\n      \n      &::before {\n        animation: buttonpulse 1500ms linear infinite;\n        z-index: 1;\n        border: 1rem solid var(--light-green);\n      }\n      &::after {\n        background-color: var(--green);\n        z-index: 2;\n      }\n      svg {\n        position: relative;\n        z-index: 3;\n      }\n    ":"\n      z-index: 1000;\n      position: relative;\n      background-color: var(--deep-blue);\n      color: var(--sand);\n      cursor: pointer;\n      border-width: 0;\n      outline-width: 0;\n\n      &:active {\n        background-color: var(--blue);\n      }\n    ",l="\n      border-radius: ".concat(n?"0.25rem":"50%",";\n      ").concat(s,"\n      ").concat(c,"\n      opacity: ").concat("empty"===t?"0":"1",";\n      pointer-events: auto;\n    "),u=o?P.a.div(te(),l):P.a.button(ee(),l),d={info:K.g,back:K.c,reset:K.b,camera:K.a,close:K.j,globe:K.f,help:K.h,play:K.d,unknown:Z.a,spinner:$.a,tap:K.i,move:Z.b,pinch:K.e},p=d[t]||d.unknown,h="spinner"===t?"fa-spin":"";return i.a.createElement(i.a.Fragment,null,i.a.createElement(u,{onClick:o?null:this.onClick,type:o?"":"button"},t?i.a.createElement(p,{className:h}):null,r?i.a.createElement("span",null,r):null))}}]),t}(a.Component);function ae(){var e=Object(R.a)(["\n  width: auto;\n  height: 2rem;\n"]);return ae=function(){return e},e}function ie(){var e=Object(R.a)(["\n  width: 100%;\n  height: auto;\n"]);return ie=function(){return e},e}var re=P.a.img(ie()),oe=P.a.img(ae()),se=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).onClick=function(){var t=e.props.onClick;t&&t()},e}return Object(v.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.inline;return i.a.createElement(i.a.Fragment,null,e?i.a.createElement(oe,{src:"".concat(".","/assets/images/logo-inline.png"),alt:"AR Earth Day 2020"}):i.a.createElement(re,{src:"".concat(".","/assets/images/logo.png"),alt:"AR Earth Day 2020"}))}}]),t}(a.Component);function ce(){var e=Object(R.a)(["\n  max-width: 240px;\n"]);return ce=function(){return e},e}function le(){var e=Object(R.a)(["\n  bottom: 0;\n  ","\n  flex-direction: column;\n\n  & p {\n  }\n"]);return le=function(){return e},e}function ue(){var e=Object(R.a)(["\n  bottom: 6rem;\n  ","\n  opacity: 1;\n  transition: opacity 900ms linear;\n\n  &.loaded {\n    opacity: 0;\n  }\n\n  img {\n    max-height: 2rem;\n    width: auto;\n    margin: 0 0.5rem;\n  }\n"]);return ue=function(){return e},e}function de(){var e=Object(R.a)(["\n  top: 50%;\n  ","\n  transform: translateY(-50%);\n  transition: top 1500ms ease-in-out, transform 1500ms ease-in-out;\n\n  &.loaded {\n    transform: translateY(0);\n    top: 0;\n  }\n"]);return de=function(){return e},e}var pe="\n  z-index: 1000;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  position: fixed;\n  left: 0;\n  width: 100vw;\n  margin: auto;\n  padding: 2rem;\n  justify-content: center;\n  align-items: center;\n",he=P.a.div(de(),pe),me=P.a.div(ue(),pe),be=P.a.div(le(),pe),fe=P.a.div(ce()),ge=function(e){var t=e.load,n=e.onClickPlay,a=e.compatible;return i.a.createElement(i.a.Fragment,null,i.a.createElement(he,{className:t?"loading":"loaded"},i.a.createElement(fe,null,i.a.createElement(se,null))),i.a.createElement(me,{className:t?"loading":"loaded"},i.a.createElement("a",{rel:"nofollow noopener noreferrer",target:"_blank",href:"https://threejs.org"},i.a.createElement("img",{alt:"Powered by ThreeJS",src:"".concat(".","/assets/images/threejs.svg")})),i.a.createElement("a",{rel:"nofollow noopener noreferrer",target:"_blank",href:"https://immersive-web.github.io/webxr-samples/"},i.a.createElement("img",{alt:"Powered by WebXR",src:"".concat(".","/assets/images/webxr-logo.svg")}))),i.a.createElement(be,null,t&&i.a.createElement(ne,{square:!0,text:"Loading assets"}),!t&&a&&i.a.createElement(ne,{square:!0,text:"Start AR",onClick:function(){n&&n()}}),!t&&!a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"WebXR is either not supported or not enabled on your browser, please make sure you're running at least Chrome 81 on an AR-compliant device"),i.a.createElement("p",null,"Alternatively enable the following two Chrome flags (chrome://flags): WebXRDevice API (#webxr) and WebXR Hit Test (#webxr-hit-test)"))))},ve=n(62);function we(){var e=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  width: 100%;\n  margin-top: 0.8rem;\n  margin-bottom: 0.8rem;\n\n  &.center {\n    align-items: center;\n    justify-content: center;\n  }\n\n  p {\n    margin-top: 0;\n    margin-bottom: 0;\n  }\n\n  .fact {\n    font-size: 2.15rem;\n    font-weight: 400;\n    line-height: 1.15;\n    margin-top: 0.25rem;\n    margin-bottom: 0.25rem;\n\n    b {\n      color: var(--fact);\n    }\n  }\n"]);return we=function(){return e},e}function Ee(){var e=Object(R.a)(["\n  vertical-align: middle;\n  font-size: 1.05em;\n\n  button {\n    vertical-align: middle;\n    margin-right: 0.35rem;\n    font-size: 0.95em;\n    padding: 0.4em;\n  }  \n"]);return Ee=function(){return e},e}function ye(){var e=Object(R.a)(["\n  vertical-align: middle;\n"]);return ye=function(){return e},e}function Oe(){var e=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  height: auto;\n  padding: 1rem;\n  justify-content: flex-end;\n  align-items: flex-start;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 15%, rgba(0, 0, 0, 0.8) 100%);  \n  pointer-events: auto;\n\n  h1, h2, h4 {\n    margin: 0;        \n  }\n"]);return Oe=function(){return e},e}function xe(){var e=Object(R.a)(["\n  position: fixed;\n  z-index: 1010;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  pointer-events: none;\n"]);return xe=function(){return e},e}var Se=P.a.div(xe()),Te=P.a.div(Oe()),Ce=P.a.h1(ye()),je=P.a.h4(Ee()),ke=P.a.div(we()),Me={Ocean:{interactive:!0,title:"Atlantic Ocean",subtitle:"Ocean Fun Facts:",description:"The largest and most diverse biome in the world is largely affected by trash buildup. Make sure you are taking steps to recycle your waste!",facts:[{title:"Over <b>90%</b>",description:"of the life on Earth lives in the oceans"},{title:"<b>12,400</b> feet",description:"The average depth of the ocean is 12,400 ft or about 2.35 miles!"}]},TropicalRainforest:{interactive:!0,title:"The Amazon Forest",subtitle:"Tropical Rainforest Fun Facts:",description:"Tropical rainforests are important because they provide oxygen, take in carbon dioxide, and are a huge source of biodiversity and cultural diversity. Be conscious of the amount of paper you use each day to help reduce the levels of deforestation!",facts:[{title:"The <b>Amazon</b>",description:"is the largest Tropical Rainforest"},{title:"<b>50</b>% of flora and fauna",description:"Only covers 2% of Earth\u2019s surface, but contains 50% of its plants and land animals"}]},TemperateRainforest:{interactive:!0,title:"US National Forests",subtitle:"Temperate Rainforest Fun Facts:",description:"Characterized by vast amounts of rainforests and cooler temperatures than Tropical Rainforests. These forests and others have been receding from deforestation, get your friends and family together and go plant trees to help grow the forests back!",facts:[{title:"<b>90,000</b> acorns",description:"A single oak tree in this forest can produce 90,000 acorns each year!"},{title:"<b>Sharp</b> claws",description:"Many animals in these forests have sharp claws for climbing trees"}]},Freshwater:{interactive:!0,title:"The Nile",subtitle:"Freshwater Fun Facts:",description:"This biome consists of lakes, ponds, streams and rivers that have less than 1% of salt content. Make sure you use safe green approved pesticides and fertilizer in your gardens to help stop dangerous runoff!",facts:[{title:"<b>4,132</b> miles",description:"The Nile is the longest freshwater river biome"},{title:"<b>3</b> groups",description:"There are 3 groups of Freshwater biomes: lakes and ponds, streams and rivers, and wetlands"}]},Chaparral:{interactive:!0,title:"Southern California",subtitle:"Chaparral Fun Facts:",description:"Chaparral biomes help protect the dry land from eroding from wind and rain. One way to protect this biome is to take extra steps to make sure you are safe from starting a fire as these areas are prone to wildfires.",facts:[{title:"<b>Fire!</b>",description:"Some plants in this biome have adapted to the fires, their seeds lay dormant until they are touched by fire!"},{title:"<b>30</b>\u2109 - <b>100</b>\u2109",description:"During winter temperatures can get as low as 30 degrees F in the summer it can get up to 100 degrees F!"}]},InnerCore:{title:"Inner Core",subtitle:"About 70% of the moon size",description:"Only discovered to be a hard solid ball in 1936, is believed to be just as hot as the sun's surface.",facts:[{title:"<b>760</b> miles",description:"is the diameter of the inner core"}]},OuterCore:{title:"Outer Core",subtitle:"The only liquid layer",description:"The outer core is responsible for Earth's magnetic field. As Earth spins on its axis, the iron inside the liquid outer core moves around",facts:[{title:"Liquid <b>iron</b>",description:"The outer core is so hot that the iron inside it is permanently liquid"}]},Mantle:{title:"Mantle",subtitle:"Makes up about 84% of Earth's volume.",description:"The entire mantle is about 1800 miles thick, which means the lower mantle makes up the bulk of this part of the Earth. The temperature of the mantle near the crust ranges from 900 to 1600 degrees Fahrenheit",facts:[{title:"<b>5400</b>\u2109",description:"The average temperature of the Mantle"}]},Crust:{title:"Crust",subtitle:"Relatively thin and rocky",description:"The Earth's lithosphere is the rigid outer layer that is made up of the crust and the part of the mantle just below it.",facts:[{title:"Only <b>2</b> miles",description:"That is the thickness the crust can reach under the oceans"}]}},Re=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).state={show:!1},e.toggleShow=function(){var t=e.state.show;e.setState({show:!t})},e}return Object(v.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=this.state,n=e.biome,a=Me[n],r=t.show;return i.a.createElement(Se,null,i.a.createElement(Te,{className:"peek-down ".concat(r?"show-full":"show-partial"),onClick:this.toggleShow},i.a.createElement(Ce,null,a.title),i.a.createElement(je,null,r?null:i.a.createElement(ne,{icon:"tap"}),r?a.subtitle:i.a.createElement("span",null,"Tap here to show some fun facts")),a.facts.map((function(e,t){var n=e.title,a=e.description,r="biome-fact-".concat(t);return i.a.createElement(ke,{key:r},i.a.createElement("h1",{className:"fact",dangerouslySetInnerHTML:{__html:n}}),i.a.createElement("p",null,a))})),i.a.createElement(ke,{key:"biome-description"},i.a.createElement("p",null,a.description)),a.interactive?i.a.createElement(ke,{key:"biome-button",className:"center"},i.a.createElement(ne,{icon:"tap",onClick:this.toggleShow}),i.a.createElement("span",null,"You can tap on the biome to interact with it")):null))}}]),t}(a.Component),Le=Object(s.b)(null,{closeBiome:z})(Re);function Ie(){var e=Object(R.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100%;\n  margin-top: 0.4rem;\n  margin-bottom: 0.4rem;\n\n  &.center {\n    justify-content: center;\n  }\n\n  div + p {\n    padding-left: 1rem;\n    margin-top: 0;\n    margin-bottom: 0;\n  }\n"]);return Ie=function(){return e},e}function Pe(){var e=Object(R.a)(["\n  z-index: 1010;\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100vw;\n  height: auto;\n  padding: 1rem;\n  justify-content: flex-end;\n  align-items: flex-start;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 15%, rgba(0, 0, 0, 0.8) 100%);\n\n  &::before {\n    content: '';\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 999;\n  }\n"]);return Pe=function(){return e},e}var Ae=P.a.div(Pe()),_e=P.a.div(Ie()),ze=[{icon:"info",title:"Point of interest",description:"Tap on the pulsating icon to explore more"},{icon:"camera",title:"Camera mode",description:"Take a picture and share with your friends"},{icon:"globe",title:"Cross-Section",description:"Explore the Earth's inner core with this tool"},{icon:"reset",title:"Replace Earth",description:"If you moved too far away you can reposition the planet by pressing this button"}],Ne=Object(s.b)(null,{toggleInfo:A})((function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae,null,i.a.createElement("h1",null,"Exploring AR Earth Day 2020"),ze.map((function(e){var t=e.icon,n=e.title,a=e.description,r="info-".concat(t);return i.a.createElement(_e,{key:r},i.a.createElement(ne,{disabled:!0,icon:t}),i.a.createElement("p",null,i.a.createElement("strong",null,n),i.a.createElement("br",null),a))})),i.a.createElement(_e,{key:"info-button",className:"center"},i.a.createElement(ne,{square:!0,text:"Got it!",onClick:function(){return e.toggleInfo()}}))))})),Fe=n(41);function He(){var e=Object(R.a)(["\n  top: 0;\n  bottom: 0;\n  background: var(--deep-blue);\n  border-radius: 0.25rem;\n"]);return He=function(){return e},e}function De(){var e=Object(R.a)(["\n  height: 1.5rem;\n  line-height: 1.5rem;\n  width: 1.5rem;\n  text-align: center;\n  background-color: var(--blue);\n  color: white;\n  border-radius: 50%;\n  cursor: grab;\n  transform: translateY(-0.5rem);\n  position: relative;\n  outline: none;\n\n  span {\n    position: absolute;\n    bottom: calc(100% + 10px);\n    background-color: var(--deep-blue);\n    color: white;\n    border-radius: 0.15rem;\n    font-size: 0.75rem;\n    line-height: 0.75rem;\n    padding: 0.5rem;\n    left: 50%;\n    transform: translateX(-50%);\n    z-index: 3;\n\n    &::before {\n      content: '';\n      position: absolute;\n      height: 0;\n      width: 0;\n      border: 4px transparent solid;\n      border-top-color: var(--deep-blue);\n      bottom: -8px;\n      left: 50%;\n      transform: translateX(-50%);      \n    }\n  }\n"]);return De=function(){return e},e}function Be(){var e=Object(R.a)(["\n  width: 100%;\n  height: 0.5rem;\n"]);return Be=function(){return e},e}function Ge(){var e=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  width: 100%;\n  margin-top: 0.8rem;\n  margin-bottom: 0.8rem;\n\n  &.center {\n    align-items: center;\n    justify-content: center;\n  }\n\n  p {\n    margin-top: 0;\n    margin-bottom: 0;\n  }\n"]);return Ge=function(){return e},e}function qe(){var e=Object(R.a)(["\n  z-index: 1010;\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100vw;\n  height: auto;\n  padding: 1rem;\n  justify-content: flex-end;\n  align-items: flex-start;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 15%, rgba(0, 0, 0, 0.8) 100%);  \n"]);return qe=function(){return e},e}var Ue=P.a.div(qe()),Xe=P.a.div(Ge()),We=Object(P.a)(Fe.a)(Be()),Je=P.a.div(De()),Ye=P.a.div(He()),Qe=function(e,t){return i.a.createElement(Je,e,i.a.createElement("span",null,"".concat((1.8*t.valueNow).toFixed(0),"\xb0")))},Ve=function(e,t){return i.a.createElement(Ye,Object.assign({},e,{index:t.index}))},Ke=Object(s.b)((function(e){return{store:e}}),{toggleSection:_,updateSection:function(e){return{type:"UPDATE_SECTION",payload:{degrees:e}}}})((function(e){var t=e.store.app;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ue,null,i.a.createElement(Xe,{key:"section-slider"},i.a.createElement(We,{defaultValue:t.section/180*100,ariaLabel:"Angle section",renderTrack:Ve,renderThumb:Qe,onChange:function(t){var n=(1.8*t).toFixed(0);e.updateSection(n)}})),i.a.createElement(Xe,{key:"section-button",className:"center"},i.a.createElement(ne,{icon:"close",onClick:function(){return e.toggleSection()}}))))}));function Ze(){var e=Object(R.a)(["\n  bottom: 0;\n  ","\n  z-index: 1000;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.7) 100%);  \n  height: 5rem;\n  pointer-events: none;\n"]);return Ze=function(){return e},e}function $e(){var e=Object(R.a)(["\n  bottom: 0;\n  ","\n\n  p {\n    width: 100%;\n    text-align: center;\n    font-size: 1.3rem;\n\n    button {\n      vertical-align: middle;\n      margin: 0 0.5rem;\n    }\n  }\n"]);return $e=function(){return e},e}function et(){var e=Object(R.a)(["\n  top: 0;\n  ","\n  pointer-events: none;\n"]);return et=function(){return e},e}var tt="\n  z-index: 1001;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  position: fixed;\n  left: 0;\n  width: 100%;\n  padding: 1rem;\n  justify-content: space-between;\n  align-items: center;\n",nt=P.a.div(et(),tt),at=P.a.div($e(),tt),it=P.a.div(Ze(),tt),rt={CAMERA_ACCESS_REQUIRED:"To continue with the AR experience we need to access to your camera",CAMERA_ACCESS_DENIED:"We can't offer an AR experience without camera permissions",SCAN_FLOOR:"Move your phone to scan a flat surface",PLACE_GLOBE:"Tap on the screen to spawn the 3D earth",INSTRUCTIONS_SWIPE:i.a.createElement(i.a.Fragment,null,i.a.createElement(ne,{icon:"move"}),i.a.createElement("span",null,"Swipe to spin the globe")),INSTRUCTIONS_PINCH:i.a.createElement(i.a.Fragment,null,i.a.createElement(ne,{icon:"pinch"}),i.a.createElement("span",null,"Pinch to zoom in and out")),INSTRUCTIONS_TAP:i.a.createElement(i.a.Fragment,null,i.a.createElement(ne,{icon:"tap"}),i.a.createElement("span",null,"Tap on biomes to interact and titles to find out more")),INSTRUCTIONS_ICON:i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,"Tap on "),i.a.createElement(ne,{icon:"info"}),i.a.createElement("span",null," to explore"))},ot=Object(s.b)((function(e){return{store:e}}),{toggleInfo:A,toggleCamera:function(){return{type:"TOGGLE_CAMERA"}},toggleSection:_,closeBiome:z,resetGlobe:N})((function(e){var t=e.store;return i.a.createElement("div",{id:"interface"},i.a.createElement(nt,null,i.a.createElement(ve.a,{in:!t.ui.picture,classNames:"slide-up",timeout:300,unmountOnExit:!0,appear:!0},i.a.createElement(se,{inline:!0})),i.a.createElement(ve.a,{in:!t.ui.hide||t.ui.biome,classNames:"slide-up",timeout:300,appear:!0},i.a.createElement("div",null,t.ui.biome?i.a.createElement(ne,{icon:"close",onClick:function(){return e.closeBiome()}}):i.a.createElement(ne,{icon:"help",onClick:function(){return e.toggleInfo()}})))),i.a.createElement(ve.a,{in:!t.ui.hide&&!t.ui.biome,classNames:"slide-down",timeout:300,unmountOnExit:!0,appear:!0},i.a.createElement(at,null,i.a.createElement(ne,{icon:"reset",onClick:function(){return e.resetGlobe()}}))),i.a.createElement(ve.a,{in:t.ui.section&&!t.ui.biome,classNames:"slide-down",timeout:300,unmountOnExit:!0,appear:!0},i.a.createElement(at,null,i.a.createElement(Ke,null))),i.a.createElement(ve.a,{in:t.ui.info,classNames:"slide-down",timeout:300,unmountOnExit:!0,appear:!0},i.a.createElement(Ne,null)),i.a.createElement(ve.a,{in:t.ui.biome,classNames:"slide-down",timeout:300,unmountOnExit:!0,appear:!0},i.a.createElement(Le,{biome:t.app.biome})),i.a.createElement(ve.a,{in:t.ui.message,classNames:"slide-down",timeout:300,unmountOnExit:!0,appear:!0},i.a.createElement(at,null,i.a.createElement("p",null,rt[t.app.message]))),i.a.createElement(it,null))})),st=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(f.a)(this,Object(g.a)(t).call(this))).state={loading:!0,compatible:!0,model:null,playing:!1,session:null},e.startExperience=function(){var t=e.state.compatible,n={requiredFeatures:["hit-test","dom-overlay"],domOverlay:{root:document.querySelector("#root")}};t?navigator.xr.requestSession("immersive-ar",n).then((function(t){w.a.event({category:"app",action:"experience",label:"session start"}),e.setState({playing:!0,session:t})})):e.setState({playing:!0,session:!1})},e}return Object(v.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.pageview(window.location.pathname+window.location.search);var t=function(t){e.setState({compatible:t}),function(){var t=new O.a,n=new x.a;n.setDecoderPath("".concat(".","/draco/gltf/")),n.preload(),t.setDRACOLoader(n);var a={globe:"".concat(".","/assets/models/globe.glb"),audios:["temperaterainforest-bg","temperaterainforest-interaction","freshwater-bg","freshwater-interaction","tropicalrainforest-bg","tropicalrainforest-interaction","chaparral-bg","chaparral-interaction"]},i={};t.load(a.globe,(function(t){console.log(t),w.a.event({category:"loaders",action:"model_loaded",label:"earth",nonInteractive:!0});var n=t.scene,r=Object(E.a)(n.children,4),o=r[0],s=r[1],c={temperaterainforest:o,tropicalrainforest:r[2],chaparral:r[3],freshwater:s};w.a.event({category:"loaders",action:"model_loaded",label:"biomes",nonInteractive:!0});var l={},u={};if(Object.keys(c).forEach((function(e){c[e].children.forEach((function(e){var t=e.scale,n=t.x,a=t.y,i=t.z;l[e.name]=JSON.parse(JSON.stringify({x:n,y:a,z:i}));var r=e.rotation,o=r.x,s=r.y,c=r.z;u[e.name]=JSON.parse(JSON.stringify({x:o,y:s,z:c})),e.scale.set(1e-7,1e-7,1e-7),e.visible=!1}))})),e.setState({model:n}),e.state.compatible){var d=new y.e;a.audios.forEach((function(e){d.load("".concat(".","/assets/sounds/").concat(e,".mp3"),(function(t){i[e]=t,w.a.event({category:"loaders",action:"audio_loaded",label:e,nonInteractive:!0})}))}))}n.userData={biomes:c,scales:l,rotations:u,audioBuffers:i},e.setState({loading:!1})}),null,(function(t){console.log(t),e.setState({loading:!1})}))}()},n=function(e){window.console.warn(e),t(!1)};window.onload=function(){"undefined"!==typeof navigator.xr&&navigator.xr.isSessionSupported&&navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?t(!0):n("XR exists but immersive AR is not supported")})).catch(n)}}},{key:"render",value:function(){var e=this.state,t=e.model,n=e.loading,a=e.playing,r=e.compatible,o=e.session;return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(V,{globe:t,session:o}),i.a.createElement(ot,null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(k,{globe:t}),i.a.createElement(ge,{load:n,compatible:r,onClickPlay:this.startExperience}))}}]),t}(a.Component),ct=(n(57),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return w.a.initialize("UA-172483840-2"),i.a.createElement("div",{className:"App"},i.a.createElement(st,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lt=document.getElementById("root");o.a.render(i.a.createElement(s.a,{store:h},i.a.createElement(ct,null)),lt),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.c77b0430.chunk.js.map